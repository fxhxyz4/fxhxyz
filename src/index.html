<!DOCTYPE html>
<html class="html" lang="en">
  <include src="./partials/_head.html"></include>
  <body class="page">
    <video class="load" autoplay muted>
      <source src="./img/kaliload.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <div class="wrap">
      <include src="./partials/_main.html"></include>
    </div>
    <video class="back">
      <source class="back__source" type="video/webm">
      Your browser does not support the video tag.
    </video>
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
    <script>
      const urls = [
        "https://webm.red/dJLN.webm",
        "https://webm.red/jgax.webm",
        "https://webm.red/NbI7.webm",
      ];

      const loadVid = document.querySelector('.load');
      const wrap = document.querySelector('.wrap');

      const backVid = document.querySelector('.back');
      const backVidSource = document.querySelector('.back__source');

      loadVid.addEventListener('ended', () => {
        loadVid.style.display = 'none';

        wrap.style.display = 'flex';
        wrap.classList.add('animate__animated');
        wrap.classList.add('animate__fadeIn');

        wrap.classList.add('animate_slowed');

        backVid.classList.add('animate__animated');
        backVid.classList.add('animate__fadeIn');

        document.querySelector('video').load();
        backVidSource.src = urls[Math.floor(Math.random() * urls.length)];

        backVid.autoplay = true;
        backVid.muted = true;
        backVid.load();

        anime({
          targets: '.main__svg path',
          strokeDashoffset: [anime.setDashoffset, 0],
          easing: 'easeInOutSine',
          duration: 5988
        });
      });
    </script>
  </body>
</html>
